{
//=========Macro generated from canvas: c1/c1
//=========  (Mon Jan 30 18:18:19 2017) by ROOT version5.34/30
   TCanvas *c1 = new TCanvas("c1", "c1",10,64,700,500);
   gStyle->SetOptFit(1);
   c1->Range(-62.5,-72.8523,562.5,655.6707);
   c1->SetFillColor(0);
   c1->SetBorderMode(0);
   c1->SetBorderSize(2);
   c1->SetFrameBorderMode(0);
   c1->SetFrameBorderMode(0);

   
   TH1D *time50 = new TH1D("time50","Muon lifetime",50,0,500);
   time50->SetBinContent(1,532);
   time50->SetBinContent(2,437);
   time50->SetBinContent(3,449);
   time50->SetBinContent(4,366);
   time50->SetBinContent(5,326);
   time50->SetBinContent(6,316);
   time50->SetBinContent(7,276);
   time50->SetBinContent(8,286);
   time50->SetBinContent(9,273);
   time50->SetBinContent(10,266);
   time50->SetBinContent(11,237);
   time50->SetBinContent(12,241);
   time50->SetBinContent(13,235);
   time50->SetBinContent(14,210);
   time50->SetBinContent(15,206);
   time50->SetBinContent(16,203);
   time50->SetBinContent(17,177);
   time50->SetBinContent(18,184);
   time50->SetBinContent(19,188);
   time50->SetBinContent(20,165);
   time50->SetBinContent(21,171);
   time50->SetBinContent(22,141);
   time50->SetBinContent(23,143);
   time50->SetBinContent(24,153);
   time50->SetBinContent(25,158);
   time50->SetBinContent(26,104);
   time50->SetBinContent(27,117);
   time50->SetBinContent(28,135);
   time50->SetBinContent(29,96);
   time50->SetBinContent(30,115);
   time50->SetBinContent(31,103);
   time50->SetBinContent(32,103);
   time50->SetBinContent(33,97);
   time50->SetBinContent(34,112);
   time50->SetBinContent(35,85);
   time50->SetBinContent(36,76);
   time50->SetBinContent(37,77);
   time50->SetBinContent(38,68);
   time50->SetBinContent(39,93);
   time50->SetBinContent(40,57);
   time50->SetBinContent(41,65);
   time50->SetBinContent(42,71);
   time50->SetBinContent(43,64);
   time50->SetBinContent(44,63);
   time50->SetBinContent(45,62);
   time50->SetBinContent(46,54);
   time50->SetBinContent(47,63);
   time50->SetEntries(8219);

   TFile *out = new TFile("histo.root", "recreate");
   out -> cd();
   time50->Write();
   out->Write();
   out -> Close();

   
   TF1 *fit = new TF1("fit","[0]*exp(-[1]*x)+[2]",40,460);
   fit->SetFillColor(19);
   fit->SetFillStyle(0);
   fit->SetLineColor(2);
   fit->SetLineWidth(2);
   fit->SetChisquare(37.82072);
   fit->SetNDF(39);
   fit->GetXaxis()->SetLabelFont(42);
   fit->GetXaxis()->SetLabelSize(0.035);
   fit->GetXaxis()->SetTitleSize(0.035);
   fit->GetXaxis()->SetTitleFont(42);
   fit->GetYaxis()->SetLabelFont(42);
   fit->GetYaxis()->SetLabelSize(0.035);
   fit->GetYaxis()->SetTitleSize(0.035);
   fit->GetYaxis()->SetTitleFont(42);
   fit->SetParameter(0,388.3689);
   fit->SetParError(0,10.11499);
   fit->SetParLimits(0,0,0);
   fit->SetParameter(1,0.004546588);
   fit->SetParError(1,0.0004765259);
   fit->SetParLimits(1,0,0);
   fit->SetParameter(2,6.38431);
   fit->SetParError(2,13.17);
   fit->SetParLimits(2,0,0);
   time50->GetListOfFunctions()->Add(fit);
   
   TF1 *fit2 = new TF1("fit2","[0]*exp(-[1]*x)-exp(-[2]*x)+[3]",40,460);
   fit2->SetFillColor(19);
   fit2->SetFillStyle(0);
   fit2->SetLineColor(4);
   fit2->SetLineWidth(2);
   fit2->SetChisquare(39.48272);
   fit2->SetNDF(38);
   fit2->GetXaxis()->SetLabelFont(42);
   fit2->GetXaxis()->SetLabelSize(0.035);
   fit2->GetXaxis()->SetTitleSize(0.035);
   fit2->GetXaxis()->SetTitleFont(42);
   fit2->GetYaxis()->SetLabelFont(42);
   fit2->GetYaxis()->SetLabelSize(0.035);
   fit2->GetYaxis()->SetTitleSize(0.035);
   fit2->GetYaxis()->SetTitleFont(42);
   fit2->SetParameter(0,393.2072);
   fit2->SetParError(0,8.99186);
   fit2->SetParLimits(0,0,0);
   fit2->SetParameter(1,0.004029723);
   fit2->SetParError(1,1.000001);
   fit2->SetParLimits(1,0,0);
   fit2->SetParameter(2,3.530371);
   fit2->SetParError(2,1);
   fit2->SetParLimits(2,0,0);
   fit2->SetParameter(3,-9.241472);
   fit2->SetParError(3,5.817899);
   fit2->SetParLimits(3,0,0);
   time50->GetListOfFunctions()->Add(fit2);
   
   TPaveStats *ptstats = new TPaveStats(0.62,0.575,0.98,0.935,"brNDC");
   ptstats->SetName("stats");
   ptstats->SetBorderSize(1);
   ptstats->SetFillColor(0);
   ptstats->SetTextAlign(12);
   ptstats->SetTextFont(42);
   TText *text = ptstats->AddText("time50");
   text->SetTextSize(0.0414);
   text = ptstats->AddText("Entries = 8219   ");
   text = ptstats->AddText("Mean  =    155");
   text = ptstats->AddText("RMS   =  124.7");
   text = ptstats->AddText("#chi^{2} / ndf = 37.82 / 39");
   text = ptstats->AddText("p0       = 388.4 #pm 10.1 ");
   text = ptstats->AddText("p1       = 0.004547 #pm 0.000477 ");
   text = ptstats->AddText("p2       = 6.384 #pm 13.170 ");
   ptstats->SetOptStat(1111);
   ptstats->SetOptFit(111);
   ptstats->Draw();
   time50->GetListOfFunctions()->Add(ptstats);
   ptstats->SetParent(time50);
   time50->SetMarkerStyle(20);
   time50->GetXaxis()->SetTitle("Time [ns]");
   time50->GetXaxis()->SetLabelFont(42);
   time50->GetXaxis()->SetLabelSize(0.035);
   time50->GetXaxis()->SetTitleSize(0.035);
   time50->GetXaxis()->SetTitleFont(42);
   time50->GetYaxis()->SetTitle("Events [-]");
   time50->GetYaxis()->SetLabelFont(42);
   time50->GetYaxis()->SetLabelSize(0.035);
   time50->GetYaxis()->SetTitleSize(0.035);
   time50->GetYaxis()->SetTitleFont(42);
   time50->GetZaxis()->SetLabelFont(42);
   time50->GetZaxis()->SetLabelSize(0.035);
   time50->GetZaxis()->SetTitleSize(0.035);
   time50->GetZaxis()->SetTitleFont(42);
   time50->Draw("+e1");
   
   TPaveText *pt = new TPaveText(0.3772126,0.94,0.6227874,0.995,"blNDC");
   pt->SetName("title");
   pt->SetBorderSize(0);
   pt->SetFillColor(0);
   pt->SetFillStyle(0);
   pt->SetTextFont(42);
   text = pt->AddText("Muon lifetime");
   pt->Draw();
   c1->Modified();
   c1->cd();
   c1->SetSelected(c1);


   cout << "tau1 = " << 1./fit -> GetParameter(1) << endl;
   cout << "tau2 = " << 1./fit2 -> GetParameter(1) << endl;
   
}
